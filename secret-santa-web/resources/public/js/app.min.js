function date(a,b){var c=this;c.date=a,c.available=null!=b?b:!0}var app=angular.module("secretSanta",["ngRoute","ngResource"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/login",{templateUrl:"login.html",controller:"loginController",controllerAs:"login",name:"Login",path:"#/login",includeInNav:!1}).when("/preferences/:email?",{templateUrl:"preferences.html",controller:"preferencesController",controllerAs:"preferences",name:"Preferences",path:"#/preferences",includeInNav:!0})}]).factory("preferences",["$resource",function(a){return a("/preferences")}]).factory("dates",["$resource",function(a){return a("/event/:id/dates")}]).factory("venues",["$resource",function(a){return a("/event/:id/venues")}]).factory("authentication",["$resource",function(a){return a("/authentication/:id")}]),app.controller("appController",["$scope","$route","$location",function(a,b,c){var d=this;d.routes=[],d.routeIsActive=function(a){return a.regexp.test(c.path())},angular.forEach(b.routes,function(a,b){1==a.includeInNav&&d.routes.push(a)}),d.test=function(){console.log(d.routes)}}]),app.controller("preferencesController",["$scope","$routeParams","preferences","dates","venues","$rootScope",function(a,b,c,d,e,f){var g=this,h=1;g.userEmail=null==b.email?f.email:b.email,f.email=g.userEmail,g.availableVenues=["Test Venue"],g.availableDates=[new date(moment(new Date(2015,12,1)))],e.query({id:h},function(a){g.availableVenues=a}),d.query({id:h},function(a){angular.forEach(a,function(a){g.availableDates.push(new date(moment(new Date(a))))})}),g.venue=null,g.busy=!1,g.success=!1,g.fail=!1,g.formatDate=function(a){return a.date.format("Do MMMM YYYY")},g.savePreferences=function(){for(var a=[],b=0;b<g.availableDates.length;b++){var d=g.availableDates[b];a.push({date:d.date.utc().format("YYYY-MM-DD"),available:d.available})}c.save({email:g.userEmail,dates:a,venue:g.venue})}}]),app.controller("loginController",["authentication",function(a){var b=this;b.email=null,b.login=function(){}}]);