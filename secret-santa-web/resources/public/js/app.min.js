function date(a,b){var c=this;c.date=a,c.selected=null!=b?b:!0}angular.module("secretSanta",["ngRoute","ngResource"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"home.html",name:"Home",path:"#/"}).when("/preferences/:email?",{templateUrl:"preferences.html",controller:"preferencesController",controllerAs:"preferences",name:"Preferences",path:"#/preferences"})}]).factory("preferences",["$resource",function(a){return a("/preferences")}]),angular.module("secretSanta").controller("appController",["$scope","$route","$location",function(a,b,c){var d=this;d.routes=[],d.routeIsActive=function(a){return a.regexp.test(c.path())},angular.forEach(b.routes,function(a,b){null==a.redirectTo&&d.routes.push(a)}),d.test=function(){console.log(d.routes)}}]),angular.module("secretSanta").controller("preferencesController",["$scope","$routeParams","$rootScope","preferences",function(a,b,c,d){var e=this;e.userEmail=null==b.email?c.email:b.email,c.email=e.userEmail,e.availableVenues=["Red Lion","Parson"],e.availableDates=[new date(moment(new Date(2015,1,1))),new date(moment(new Date(2015,1,2))),new date(moment(new Date(2015,1,5))),new date(moment(new Date(2015,1,6)))],e.venue=null,e.formatDate=function(a){return a.date.format("MMMM Do YYYY")},e.savePreferences=function(){for(var a=[],b=0;b<e.availableDates.length;b++){var c=e.availableDates[b];a.push({date:c.date.utc().toDate(),selected:c.selected})}d.save({email:e.userEmail,dates:a,venue:e.venue})}}]);