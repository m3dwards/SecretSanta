function date(a,b){var c=this;c.date=a,c.available=null!=b?b:!0}var app=angular.module("secretSanta",["ngRoute","ngResource"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"home.html",name:"Home",path:"#/"}).when("/preferences/:email?",{templateUrl:"preferences.html",controller:"preferencesController",controllerAs:"preferences",name:"Preferences",path:"#/preferences"})}]).factory("preferences",["$resource",function(a){return a("/preferences")}]).config(["$httpProvider",function(a){a.interceptors.push(function(a){return{request:function(a){return $("#busy").show(),$(".hide-on-busy").hide(),$(".ajax-success").hide(),$(".ajax-failure").hide(),a},requestError:function(b){return $("#busy").hide(),$(".hide-on-busy").show(),$(".ajax-failure").show(),a.reject(b)},response:function(a){return $("#busy").hide(),$(".hide-on-busy").show(),$(".ajax-success").show(),a},responseError:function(b){return $("#busy").hide(),$(".hide-on-busy").show(),$(".ajax-failure").show(),a.reject(b)}}})}]),app.controller("appController",["$scope","$route","$location",function(a,b,c){var d=this;d.routes=[],d.routeIsActive=function(a){return a.regexp.test(c.path())},angular.forEach(b.routes,function(a,b){null==a.redirectTo&&d.routes.push(a)}),d.test=function(){console.log(d.routes)}}]),app.controller("preferencesController",["$scope","$routeParams","$rootScope","preferences",function(a,b,c,d){var e=this;e.userEmail=null==b.email?c.email:b.email,c.email=e.userEmail,e.availableVenues=["Red Lion","Parson"],e.availableDates=[new date(moment(new Date(2015,1,1))),new date(moment(new Date(2015,1,2))),new date(moment(new Date(2015,1,5))),new date(moment(new Date(2015,1,6)))],e.venue=null,e.formatDate=function(a){return a.date.format("MMMM Do YYYY")},e.savePreferences=function(){for(var a=[],b=0;b<e.availableDates.length;b++){var c=e.availableDates[b];a.push({date:c.date.utc().toDate(),available:c.selected})}d.save({email:e.userEmail,dates:a,venue:e.venue})}}]);